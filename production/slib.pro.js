var sl=SLib={};try{module.exports=sl}catch(e){console.log(e)};sl.eagleMysql=function(){this.mysql=null,this.client=null,this.dbConfig=null;var e={};return e.debug=!1,e.init=function(t){e.debug&&console.log("[init eagleMysql]: "+t),this.mysql=require("mysql"),this.dbConfig=t},e.createTables=function(t){for(var n=0,r=t.length;n<r;++n){var i=t[n].Name,s=t[n].Fields,u="CREATE TABLE if not exists "+i+"(ID INT(11) not null AUTO_INCREMENT, ";for(var a=0,f=s.length;a<f;++a)u+=s[a].key+" "+s[a].type+", ";u+="PRIMARY KEY (id))",e.debug&&console.log("[createTables]: "+u),this.client.query(u)}},e.insert=function(t,n){var r=" "+t.keys[0]+"=? ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+"=? ";e.debug&&console.log("[insert]: INSERT INTO "+t.table+" SET "+r),this.client.query("INSERT INTO "+t.table+" SET "+r,t.values,function(t,r,i){e._doCallback(t,r,i,n)})},e.delete=function(t,n){e.debug&&console.log("[delete]: DELETE FROM "+t.table+" "+t.conditions),this.client.query("DELETE FROM "+t.table+" "+t.conditions,function(t,r,i){e._doCallback(t,r,i,n)})},e.update=function(t,n){var r=" "+t.keys[0]+"=? ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+"=? ";e.debug&&console.log("[update]: UPDATE "+t.table+" SET "+r+" "+t.conditions),this.client.query("UPDATE "+t.table+" SET "+r+" "+t.conditions,t.values,function(t,r,i){e._doCallback(t,r,i,n)})},e.select=function(t,n){var r=" "+t.keys[0]+" ";for(var i=1,s=t.keys.length;i<s;++i)r+=", "+t.keys[i]+" ";e.debug&&console.log("[update]: SELECT "+r+" FROM "+t.table+" "+t.conditions),this.client.query("SELECT "+r+" FROM "+t.table+" "+t.conditions,function(t,r,i){e._doCallback(t,r,i,n)})},e.connet=function(){this.client=this.mysql.createConnection(this.dbConfig.dbOptions),e.debug&&console.log("[connet]: USE "+this.dbConfig.dataBase),this.client.query("USE "+this.dbConfig.dataBase,function(e,t){if(e){console.log("ClientConnectionReady Error: "+e.message);return}console.log("ClientConnect Success")})},e.disconnet=function(){this.client.end(),this.client=null},e._doCallback=function(e,t,n,r){e?r.error(e):(data={results:t,fields:n},r.success(data))},e}();sl.sqlCondition=function(){var e=e||"";this.where=function(t){return e+=" where "+t,this},this.and=function(t){return e+=" and "+t,this},this.or=function(t){return e+=" or "+t,this},this.getSql=function(){return e}};